engine: V2
name: Farm payments
metadata:
  id: 5c67688f-3c61-4839-a6e1-d48b598257f1
  enabledInProd: true
  whitelistCrnEnvVar: FARMING_PAYMENTS_WHITELIST_CRNS
  whitelistSbiEnvVar: FARMING_PAYMENTS_WHITELIST_SBIS
  submission:
    grantCode: frps-private-beta
    submissionSchemaPath: ./schemas/farm-payments.schema.json
  grantRedirectRules:
    preSubmission:
      - toPath: /check-selected-land-actions
    postSubmission:
      # Received, reviewing and accepted
      - fromGrantsStatus: SUBMITTED
        gasStatus: APPLICATION_RECEIVED,IN_REVIEW,AGREEMENT_GENERATING
        toGrantsStatus: SUBMITTED
        toPath: /confirmation

      # Cleared
      - fromGrantsStatus: SUBMITTED,REOPENED
        gasStatus: APPLICATION_WITHDRAWN
        toGrantsStatus: CLEARED
        toPath: /confirm-farm-details

      # Awaiting amendments
      - fromGrantsStatus: SUBMITTED
        gasStatus: AWAITING_AMENDMENTS
        toGrantsStatus: REOPENED
        toPath: /check-selected-land-actions

      # Agreement drafted, offered or withdrawal requested -> agreements service
      - fromGrantsStatus: SUBMITTED
        gasStatus: AGREEMENT_DRAFTED,AGREEMENT_OFFERED,WITHDRAWAL_REQUESTED
        toGrantsStatus: SUBMITTED
        toPath: /agreement

      # Reopened
      - fromGrantsStatus: REOPENED
        gasStatus: default
        toGrantsStatus: REOPENED
        toPath: /check-selected-land-actions

      # Submitted -> confirmation (default for most GAS statuses)
      - fromGrantsStatus: SUBMITTED
        gasStatus: default
        toGrantsStatus: SUBMITTED
        toPath: /confirmation

      # Default fallback
      - fromGrantsStatus: default
        gasStatus: default
        toGrantsStatus: SUBMITTED
        toPath: /confirmation
  confirmationContent:
    html: |
      <p class="govuk-body">It may be useful to write down your application number, so you have it ready if you need to contact us.</p>
      <h2 class="govuk-heading-m">What happens next</h2>
      <p class="govuk-body">The Rural Payments Agency (RPA) will email you when your agreement offer is available to review.</p>

      {{DEFRASUPPORTDETAILS}}
pages:
  - title: Confirm your details
    path: /confirm-farm-details
    controller: ConfirmFarmDetailsController
    next: []
    id: a24cb35f-a359-4934-b8c8-56ff92cb3df0
  - title: Confirm you will be eligible
    path: /confirm-you-will-be-eligible
    view: confirm-you-will-be-eligible.html
    next: []
    id: 905a3c86-350c-4a52-8cbe-772ee9169365
  - title: Confirm your land details are up to date
    path: /confirm-your-land-details-are-up-to-date
    view: confirm-your-land-details-are-up-to-date.html
    next: []
    id: 4884e676-569a-4669-b8c8-dda3e3a522e9
  - title: Select land parcel for actions
    controller: SelectLandParcelPageController
    path: /select-land-parcel
    next: []
    id: f9f1a33b-2fb5-4418-951b-680067efc179
  - title: Select actions for land parcel
    controller: SelectLandActionsPageController
    path: /select-actions-for-land-parcel
    id: 7b0a5e2f-4c31-4a45-95ee-abc000da0473
  - title: Review the actions you have selected
    path: /check-selected-land-actions
    controller: LandActionsCheckPageController
    next: []
    id: 245dc425-8efa-45b7-92df-178d1b0fe4ce
  - title: Remove parcel
    path: /remove-parcel
    controller: RemoveActionPageController
    next: []
    id: 7a71a506-9d5e-4420-9c67-5b0950de2020
  - title: Remove action
    path: /remove-action
    controller: RemoveActionPageController
    next: []
    id: b5259479-a2b2-46f2-ae60-70a89a2530cc
  - title: Submit your application
    path: /submit-your-application
    controller: SubmissionPageController
    next: []
    id: 5a1535ca-0c2a-4d34-80d7-385f17dfbf5e
lists: []
sections: []
conditions: []
schema: 2
