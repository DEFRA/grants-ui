engine: V2
name: Who is applying
metadata:
  id: dac378f9-136b-49d1-8c58-2d4c90d7b1d1
  tasklistId: example
  submission:
    grantCode: who-is-applying
  grantRedirectRules:
    preSubmission:
      - toPath: /summary
    postSubmission:
      # Submitted -> confirmation
      - fromGrantsStatus: SUBMITTED
        gasStatus: RECEIVED
        toGrantsStatus: SUBMITTED
        toPath: /confirmation

      - fromGrantsStatus: SUBMITTED
        gasStatus: OFFER_SENT
        toGrantsStatus: SUBMITTED
        toPath: /confirmation

      - fromGrantsStatus: SUBMITTED
        gasStatus: OFFER_WITHDRAWN
        toGrantsStatus: SUBMITTED
        toPath: /confirmation

      - fromGrantsStatus: SUBMITTED
        gasStatus: OFFER_ACCEPTED
        toGrantsStatus: SUBMITTED
        toPath: /confirmation

      - fromGrantsStatus: SUBMITTED
        gasStatus: default
        toGrantsStatus: SUBMITTED
        toPath: /confirmation

      # Reopened
      - fromGrantsStatus: REOPENED
        gasStatus: default
        toGrantsStatus: REOPENED
        toPath: /summary

      # Cleared
      - fromGrantsStatus: CLEARED
        gasStatus: default
        toGrantsStatus: CLEARED
        toPath: /start

      # Awaiting amendments
      - fromGrantsStatus: AWAITING_AMENDMENTS
        gasStatus: default
        toGrantsStatus: REOPENED
        toPath: /summary

      # Default fallback
      - fromGrantsStatus: default
        gasStatus: default
        toGrantsStatus: SUBMITTED
        toPath: /confirmation
pages:
  - title: Who is applying for this grant?
    path: /applying
    section: whoIsApplyingSection
    components:
      - name: grantApplicantType
        title: Who is applying for this grant?
        type: RadiosField
        list: applyingList
        options:
          customValidationMessages:
            any.required: Select who is applying for this grant
  - title: 'Check your answers: Who is applying'
    path: /summary
    controller: SectionEndController
lists:
  - title: Who is applying for this grant?
    name: applyingList
    type: string
    items:
      - text: Applicant
        value: applying-A1
      - text: Agent
        value: applying-A2
conditions: []
sections:
  - title: Who is applying
    name: whoIsApplyingSection
    hideTitle: false
startPage: /applying
