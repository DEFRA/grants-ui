name: Grants
pages:
  - title: Check if you can apply for a Pigs Might Fly Grant
    path: '/start'
    controller: StartPageController
    components:
      - name: startInfoOne
        title: Html
        type: Html
        content: |-
          <p class="govuk-body">Use this service to:</p>

          <ul class="govuk-list govuk-list--bullet">
          <li>check if you can apply for wings for your pigs (takes about 3 minutes)</li>
          <li>get an estimate of your grant funding (takes about 5 minutes if you have all the pig details)</li>
          </ul>

          <p class="govuk-body">You can apply if you:</p>

          <ul class="govuk-list govuk-list--bullet">
          <li>are a pig farmer</li>
          <li>have between 1 and 1,000 pigs</li>
          <li>will use the wings in England</li>
          <li>want to super-power your pigs</li>
          </ul>
      - name: startInsetText
        title: Inset text
        type: InsetText
        content:
          If your project is eligible, you can submit your answers to the Rural
          Payments Agency (RPA) to request the full application form.
      - name: startInfoTwo
        title: Html
        type: Html
        content: |+
          <h2 class="govuk-heading-s">Grant funding rates</h2>
          <p class="govuk-body">You can get funding for:</p>
          <ul class="govuk-list govuk-list--bullet">
          <li>£10 per pig for Large White breeds</li>
          <li>£15 per pig for British Landrace breeds</li>
          <li>£18 per pig for Berkshire breeds</li>
          <li>£10 per pig for other breeds</li>
          </ul>

          <h2 class="govuk-heading-s">Before you start</h2>
          <p class="govuk-body">To use the checker, you need:</p>
          <ul class="govuk-list govuk-list--bullet">
          <li>information about your farming business</li>
          <li>the number and breeds of pigs you have</li>
          <li>your contact details and business address</li>
          </ul>
          <p class="govuk-body">If you do not enter any information for more than 20 minutes, your application will time out and you will have to start again.</p>

          <h2 class="govuk-heading-s">Problems using the online service</h2>
          <p class="govuk-body">If you have any problems using the online service, contact the RPA.</p>

          <h2 class="govuk-heading-s">Telephone</h2>
          <p class="govuk-body">Telephone: 03000 200 301</p>
          <p class="govuk-body">Monday to Friday, 9am to 5pm (except public holidays)</p>
    next:
      - path: /are-you-in-england

  - title: Are you in England?
    path: /are-you-in-england
    next:
      - path: /you-must-be-in-england
        condition: uFOrmA
      - path: /what-is-your-business
    components:
      - name: TKsWbP
        title: Are you in England?
        type: YesNoField
        hint: ''
        options: {}
        schema: {}

  - title: You must be in England
    path: /you-must-be-in-england
    next: []
    components:
      - name: FGyiLS
        title: You must be in England
        type: Html
        hint: ''
        content: |
          <p class="govuk-body">You must be in England.</p>
        options: {}
        schema: {}

  - title: What is your business?
    path: /what-is-your-business
    next:
      - path: /what-type-of-pigs
    components:
      - name: sdFYHf
        title: What is your business?
        type: RadiosField
        list: dfdGFY
        hint: ''
        options: {}
        schema: {}

  - title: What type of pigs?
    path: /what-type-of-pigs
    components:
      - name: pigTypes
        title: What type of pigs?
        type: CheckboxesField
        list: pigTypesList
        hint: Select all that apply.
        options: {}
        schema: {}
    next:
      - path: /how-many-white-pigs
        condition: selectedWhitePig
      - path: /how-many-british-landace
        condition: selectedBritishLandace
      - path: /how-many-berkshire-pigs
        condition: selectedBerkshirePig
      - path: /how-many-other-pigs
        condition: selectedOtherPig
      - path: /potential-funding

  - title: How many White pigs do you have?
    path: /how-many-white-pigs
    components:
      - name: whitePigsCount
        title: How many White pigs do you have?
        type: NumberField
        hint: ''
        options: {}
        schema: {}
    next:
      - path: /how-many-british-landace
        condition: selectedBritishLandace
      - path: /how-many-berkshire-pigs
        condition: selectedBerkshirePig
      - path: /how-many-other-pigs
        condition: selectedOtherPig
      - path: /potential-funding

  - title: How many British Landace pigs do you have?
    path: /how-many-british-landace
    components:
      - name: britishLandacePigsCount
        title: How many British Landace pigs do you have?
        type: NumberField
        hint: ''
        options: {}
        schema: {}
    next:
      - path: /how-many-berkshire-pigs
        condition: selectedBerkshirePig
      - path: /how-many-other-pigs
        condition: selectedOtherPig
      - path: /potential-funding

  - title: How many Berkshire pigs do you have?
    path: /how-many-berkshire-pigs
    components:
      - name: berkshirePigsCount
        title: How many Berkshire pigs do you have?
        type: NumberField
        hint: ''
        options: {}
        schema: {}
    next:
      - path: /how-many-other-pigs
        condition: selectedOtherPig
      - path: /potential-funding

  - title: How many Other pigs do you have?
    path: /how-many-other-pigs
    components:
      - name: otherPigsCount
        title: How many Other pigs do you have?
        type: NumberField
        hint: ''
        options: {}
        schema: {}
    next:
      - path: /potential-funding

  - title: Potential grant funding
    path: '/potential-funding'
    components:
      - name: potentialFundingInfo
        title: Html
        type: Html
        content: |
          <p class="govuk-body">
          {% assign whitePigsCount = 'whitePigsCount' | answer | default: 0 %}
          {% assign britishLandacePigsCount = 'britishLandacePigsCount' | answer | default: 0 %}
          {% assign berkshirePigsCount = 'berkshirePigsCount' | answer | default: 0 %}
          {% assign otherPigsCount = 'otherPigsCount' | answer | default: 0 %}
          {% assign largeWhiteFunding = whitePigsCount | times: 10 %}
          {% assign britishLandraceFunding = britishLandacePigsCount | times: 15 %}
          {% assign berkshireFunding = berkshirePigsCount | times: 18 %}
          {% assign otherFunding = otherPigsCount | times: 10 %}
          {% assign totalFunding = largeWhiteFunding | plus: britishLandraceFunding | plus: berkshireFunding | plus: otherFunding %}

          Based on your pig breeds and numbers, you may be able to apply for grant funding of up to {{ totalFunding | formatCurrency: 'en-GB', 'GBP', 0 }}.

          {% if whitePigsCount > 0 %}
          <br>Large White: {{ whitePigsCount }} pigs × £10 = {{ largeWhiteFunding | formatCurrency: 'en-GB', 'GBP', 0 }}
          {% endif %}
          {% if britishLandacePigsCount > 0 %}
          <br>British Landrace: {{ britishLandacePigsCount }} pigs × £15 = {{ britishLandraceFunding | formatCurrency: 'en-GB', 'GBP', 0 }}
          {% endif %}
          {% if berkshirePigsCount > 0 %}
          <br>Berkshire: {{ berkshirePigsCount }} pigs × £18 = {{ berkshireFunding | formatCurrency: 'en-GB', 'GBP', 0 }}
          {% endif %}
          {% if otherPigsCount > 0 %}
          <br>Other breeds: {{ otherPigsCount }} pigs × £10 = {{ otherFunding | formatCurrency: 'en-GB', 'GBP', 0 }}
          {% endif %}
          </p>
      - type: Html
        name: potentialFundingWarning
        title: Html
        content:
          <div class="govuk-warning-text"> <span class="govuk-warning-text__icon"
          aria-hidden="true">!</span> <strong class="govuk-warning-text__text"> <span
          class="govuk-visually-hidden">Warning</span>There's no guarantee the project
          will receive a grant.</strong></div>
#    next:
#      -path: /summary

  - path: /summary
    controller: SummaryPageController
    title: Check your answers before submitting your form

lists:
  - title: What is the nature of your business?
    name: dfdGFY
    type: string
    items:
      - text: A grower or producer of agricultural or horticultural produce
        description: For example, arable or livestock farmer
        value: grower
      - text: A business processing agricultural or horticultural products
        description: For example a cheese processing business owner by farmer
        value: business
      - text: None of the above
        value: none

  - title: What type of pigs do you have?
    name: pigTypesList
    type: string
    items:
      - text: 'Large White'
        description: £10 per pig funding rate
        value: largeWhite
      - text: 'British Landace'
        description: £15 per pig funding rate
        value: britishLandace
      - text: Berkshire
        description: £18 per pig funding rate
        value: berkshire
      - text: Other
        description: £10 per pig funding rate
        value: other

  - title: What is the legal status of your business?
    name: ihwVmQ
    type: string
    items:
      - text: Sole trader
        value: Sole trader
      - text: Private limited company (Ltd)
        value: Private limited company (Ltd)
      - text: Partnership
        value: Partnership
      - text: Limited partnership (LP)
        value: Limited partnership (LP)
      - text: Charitable trust
        value: Charitable trust
      - text: Limited liability partnership (LLP)
        value: Limited liability partnership (LLP)
      - text: Charitable incorporated organisation (CIO)
        value: Charitable incorporated organisation (CIO)
      - text: Government (local)
        value: Government (local)
      - text: Public limited company (PLC)
        value: Public limited company (PLC)
      - text: Community interest company (CIC)
        value: Community interest company (CIC)
      - text: Non-UK company
        value: Non-UK company
      - text: The Crown
        value: The Crown
      - text: Unlimited company (Ultd)
        value: Unlimited company (Ultd)
      - text: Government (central)
        value: Government (central)

sections:
  - title: Contact details
    name: dhpiZu
    hideTitle: false

conditions:
  - name: uFOrmA
    displayName: notEngland
    value:
      name: notEngland
      conditions:
        - field:
            name: TKsWbP
            type: YesNoField
            display: Are you in England?
          operator: is
          value:
            type: Value
            value: 'false'
            display: No

  - name: selectedWhitePig
    displayName: User selected white pig
    value:
      name: selectedWhitePig
      conditions:
        - field:
            name: pigTypes
            type: CheckboxesField
            display: What type of pigs?
          operator: contains
          value:
            type: Value
            value: 'largeWhite'
            display: 'Large White'

  - name: selectedBritishLandace
    displayName: User selected british landace
    value:
      name: selectedBritishLandace
      conditions:
        - field:
            name: pigTypes
            type: CheckboxesField
            display: What type of pigs?
          operator: contains
          value:
            type: Value
            value: 'britishLandace'
            display: 'British Landace'

  - name: selectedBerkshirePig
    displayName: User selected berkshire
    value:
      name: selectedBerkshirePig
      conditions:
        - field:
            name: pigTypes
            type: CheckboxesField
            display: What type of pigs?
          operator: contains
          value:
            type: Value
            value: 'berkshire'
            display: 'Berkshire'

  - name: selectedOtherPig
    displayName: User selected other pig
    value:
      name: selectedOtherPig
      conditions:
        - field:
            name: pigTypes
            type: CheckboxesField
            display: What type of pigs?
          operator: contains
          value:
            type: Value
            value: 'other'
            display: 'other'

startPage: /start
